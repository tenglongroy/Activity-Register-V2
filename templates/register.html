

{% extends "base.html" %}

{% block content %}

<div class="row">
    <div class="col-md-4 col-md-offset-4">
    {% if error %}	<a class="text-danger">{{error}}</a>	{% endif %}
        <form class="form-signin" role="form" method='POST' action="{{url_for('user_register') }}">
            <h2 class="form-signin-heading">Register here</h2>
            <input type="username" name="username" class="form-control" placeholder="Username" id="username" required autofocus>
            <input type="username" name="nickname" class="form-control" placeholder="Nickname, same as username by default" id="nickname">
            <input type="password" name="password" id="password" class="form-control" placeholder="Password" required>
            <input type="password" name="confirm_password" id="confirm_password" class="form-control" placeholder="Confirm Password" required>
            <button class="btn btn-lg btn-primary btn-block pure-button pure-button-primary" type="submit" id="registerButton">Register</button>
        </form>
    </div>
</div>

<script type="text/javascript">
    var password = document.getElementById("password");
    var confirm_password = document.getElementById("confirm_password");
    var username = document.getElementById("username");
    var nickname = document.getElementById("nickname");
    var registerButton = document.getElementById("registerButton");

    function validatePassword(){
        if(password.value != confirm_password.value) {
            //show the hint when fail validity
            confirm_password.setCustomValidity("Passwords Don't Match");
        } else {
            confirm_password.setCustomValidity('');
        }
    }
    password.onchange = validatePassword;
    confirm_password.onkeyup = validatePassword;

    registerButton.addEventListener("click", function(event){
        if(nickname.value.length == 0)
            nickname.value = username.value;
    });
</script>

{% endblock %}